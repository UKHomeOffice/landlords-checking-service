{{ if not (eq .KUBE_NAMESPACE .BRANCH_ENV) }}
labels:
  cert-manager.io/solver: http01
{{ end }}
annotations:
  ingress.kubernetes.io/backend-protocol: "HTTPS"
  ingress.kubernetes.io/force-ssl-redirect: "true"
  {{ if or (eq .KUBE_NAMESPACE .STG_ENV) (eq .KUBE_NAMESPACE .PROD_ENV) }}
  kubernetes.io/ingress.class: "nginx-external"
  {{ end }}
  {{ if not (eq .KUBE_NAMESPACE .BRANCH_ENV) }}
  cert-manager.io/enabled: "true"
  {{ end }}
  {{ if or (eq .KUBE_NAMESPACE .UAT_ENV) (eq .KUBE_NAMESPACE .STG_ENV) }}
  ingress.kubernetes.io/whitelist-source-range: "81.111.254.178/32,213.251.23.164/32,213.251.23.185/32,213.251.23.186/32,213.251.23.187/32,213.251.23.188/32,212.137.36.229/32,52.56.62.141/32,52.56.62.142/32,52.56.62.143/32,52.56.62.144/32,52.56.62.145/32,52.56.62.146/32,62.25.109.196/32,52.48.127.144/28,52.209.62.128/25,52.56.62.128/25,82.46.140.109/32,82.38.103.248/32,52.56.221.216/32,18.130.11.142/32,18.130.6.5/32,167.98.162.0/25,167.98.158.128/25"
  {{ end }}
